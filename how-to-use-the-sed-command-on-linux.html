<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>How to Use the sed Command on Linux - DashJ</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="It might sound crazy, but the Linux sed command is a text editor without an interface. You can use it from the command line to manipulate text in files and streams. We'll show you how to harness its power."><meta name=robots content="index,follow,noarchive"><meta property="og:title" content="How to Use the sed Command on Linux"><meta property="og:description" content="It might sound crazy, but the Linux sed command is a text editor without an interface. You can use it from the command line to manipulate text in files and streams. We'll show you how to harness its power."><meta property="og:type" content="article"><meta property="og:url" content="/how-to-use-the-sed-command-on-linux.html"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-05-06T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-06T00:00:00+00:00"><meta itemprop=name content="How to Use the sed Command on Linux"><meta itemprop=description content="It might sound crazy, but the Linux sed command is a text editor without an interface. You can use it from the command line to manipulate text in files and streams. We'll show you how to harness its power."><meta itemprop=datePublished content="2024-05-06T00:00:00+00:00"><meta itemprop=dateModified content="2024-05-06T00:00:00+00:00"><meta itemprop=wordCount content="3045"><meta itemprop=keywords content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=https://assets.cdnweb.info/hugo/mainroad/css/style.css><link rel="shortcut icon" href=./favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=./index.html title=DashJ rel=home><div class="logo__item logo__text"><div class=logo__title>DashJ</div></div></a></div><div class=divider></div></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>How to Use the sed Command on Linux</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2024-05-06T00:00:00Z>May 06, 2024</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=./categories/blog/ rel=category>blog</a></span></div></div></header><div class="content post__content clearfix"><h3>Quick Links</h3><ul class=table-content-level-1><li><a href=#>The Power of sed</a></li></ul><ul class=table-content-level-1><li><a href=#>A Simple Example</a></li></ul><ul class=table-content-level-1><li><a href=#>Selecting Text</a></li></ul><ul class=table-content-level-1><li><a href=#>Making Substitutions</a></li></ul><ul class=table-content-level-1><li><a href=#>More Complex Substitutions</a></li></ul><ul class=table-content-level-1><li><a href=#>Inserting Lines and Text</a></li></ul><ul class=table-content-level-1><li><a href=#>Deleting Lines</a></li></ul><ul class=table-content-level-1><li><a href=#>Saving Your Changes</a></li></ul><ul class=table-content-level-1><li><a href=#>Having sed All That</a></li></ul><h3 class="title icon i-list">Key Takeaways</h3><ul><li>The Linux sed command is a powerful text editor without an interface, used for manipulating text in files and streams.</li><li>Sed can select, substitute, add, delete, and modify text in files and streams, providing instructions for it to follow as it works.</li><li>Sed relies heavily on regular expressions for pattern matching and text selection, and familiarity with regexes is important for using sed effectively.</li></ul><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>It might sound crazy, but the Linux <code>sed</code> command is a text editor without an interface. You can use it from the command line to manipulate text in files and streams. We'll show you how to harness its power.</p><h2 id=the-power-of-sed>The Power of sed</h2><p>The <code>sed</code> command is a bit like chess: it takes an hour to learn the basics and a lifetime to master them (or, at least a lot of practice). We'll show you a selection of opening gambits in each of the main categories of <code>sed</code> functionality.</p><p><code>sed</code> is a <a href=#>stream editor</a> that works on piped input or files of text. It doesn't have an interactive text editor interface, however. Rather, you provide instructions for it to follow as it works through the text. This all works in Bash and other command-line shells.</p><p>With <code>sed</code> you can do all of the following:</p><ul><li>Select text</li><li>Substitute text</li><li>Add lines to text</li><li>Delete lines from text</li><li>Modify (or preserve) an original file</li></ul><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>We've structured our examples to introduce and demonstrate concepts, not to produce the tersest (and least approachable) <code>sed</code> commands. However, the pattern matching and text selection functionalities of <code>sed</code> rely heavily on regular expressions (<a href=#>regexes</a>). You're going to need some familiarity with these to get the best out of <code>sed</code>.</p><h2 id=a-simple-example>A Simple Example</h2><p>First, we're going to use <code>echo</code> to send some text to <code>sed</code><a href=#>through a pipe</a>, and have <code>sed</code> substitute a portion of the text. To do so, we type the following:</p><pre>echo howtogonk | sed 's/gonk/geek/'</pre><p>The <code>echo</code> command sends "howtogonk" into <code>sed</code>, and our simple substitution rule (the "s" stands for substitution) is applied. <code>sed</code> searches the input text for an occurrence of the first string, and will replace any matches with the second.</p><p>The string "gonk" is replaced by "geek," and the new string is printed in the terminal window.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/34.png><p>Substitutions are probably the most common use of <code>sed</code>. Before we can dive deeper into substitutions, though, we need to know how to select and match text.</p><h2 id=selecting-text>Selecting Text</h2><p>We're going to need a text file for our examples. We'll use one that contains a selection of verses from Samuel Taylor Coleridge's epic poem "The Rime of the Ancient Mariner."</p><p>We type the following to take a look at it with <code>less</code>:</p><pre>less coleridge.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/2-1.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>To select some lines from the file, we provide the start and end lines of the range we want to select. A single number selects that one line.</p><p>To extract lines one to four, we type this command:</p><pre>sed -n '1,4p' coleridge.txt</pre><p>Note the comma between <code>1</code> and <code>4</code>. The <code>p</code> means "print matched lines." By default, <code>sed</code> prints all lines. We'd see all the text in the file with the matching lines printed twice. To prevent this, we'll use the <code>-n</code> (quiet) option to suppress the unmatched text.</p><p>We change the line numbers so we can select a different verse, as shown below:</p><pre>sed -n '6,9p' coleridge.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/3-1.png><p>We can use the <code>-e</code> (expression) option to make multiple selections. With two expressions, we can select two verses, like so:</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre>sed -n -e '1,4p' -e '31,34p' coleridge.txt</pre><p>If we reduce the first number in the second expression, we can insert a blank between the two verses. We type the following:</p><pre>sed -n -e '1,4p' -e '30,34p' coleridge.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/4-1.png><p>We can also choose a starting line and tell <code>sed</code> to step through the file and print alternate lines, every fifth line, or to skip any number of lines. The command is similar to those we used above to select a range. This time, however, we'll use a tilde (<code>~</code>) instead of a comma to separate the numbers.</p><p>The first number indicates the starting line. The second number tells <code>sed</code> which lines after the starting line we want to see. The number 2 means every second line, 3 means every third line, and so on.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>We type the following:</p><pre>sed -n '1~2p' coleridge.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/6-1.png><p>You won't always know where the text you're looking for is located in the file, which means line numbers won't always be much help. However, you can also use <code>sed</code> to select lines that contain matching text patterns. For example, let's extract all lines that start with "And."</p><p>The caret (<code>^</code>) represents the start of the line. We'll enclose our search term in forward slashes (<code>/</code>). We also include a space after "And" so words like "Android" won't be included in the result.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Reading <code>sed</code> scripts can be a bit tough at first. The <code>/p</code> means "print," just as it did in the commands we used above. In the following command, though, a forward slash precedes it:</p><pre>sed -n '/^And /p' coleridge.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/5-1.png><p>Three lines that start with "And " are extracted from the file and displayed for us.</p><h2 id=making-substitutions>Making Substitutions</h2><p>In our first example, we showed you the following basic format for a <code>sed</code> substitution:</p><pre>echo howtogonk | sed 's/gonk/geek/'</pre><p>The <code>s</code> tells <code>sed</code> this is a substitution. The first string is the search pattern, and the second is the text with which we want to replace that matched text. Of course, as with all things Linux, the devil is in the details.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>We type the following to change all occurrences of "day" to "week," and give the mariner and albatross more time to bond:</p><pre>sed -n 's/day/week/p' coleridge.txt</pre><p>In the first line, only the second occurrence of "day" is changed. This is because <code>sed</code> stops after the first match per line. We have to add a "g" at the end of the expression, as shown below, to perform a global search so all matches in each line are processed:</p><pre>sed -n 's/day/week/gp' coleridge.txt</pre><p>This matches three out of the four in the first line. Because the first word is "Day," and <code>sed</code> is case-sensitive, it doesn't consider that instance to be the same as "day."</p><p>We type the following, adding an <code>i</code> to the command at the end of the expression to indicate case-insensitivity:</p><pre>sed -n 's/day/week/gip' coleridge.txt</pre><p>This works, but you might not always want to turn on case-insensitivity for everything. In those instances, you can use a regex group to add pattern-specific case-insensitivity.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>For example, if we enclose characters in square brackets (<code>[]</code>), they're interpreted as "any character from this list of characters."</p><p>We type the following, and include "D" and "d" in the group, to ensure it matches both "Day" and "day":</p><pre>sed -n 's/[Dd]ay/week/gp' coleridge.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/16.png><p>We can also restrict substitutions to sections of the file. Let's say our file contains weird spacing in the first verse. We can use the following familiar command to see the first verse:</p><pre>sed -n '1,4p' coleridge.txt</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>We'll search for two spaces and substitute them with one. We'll do this globally so the action is repeated across the entire line. To be clear, the search pattern is space, space asterisk (<code>*</code>), and the substitution string is a single space. The <code>1,4</code> restricts the substitution to the first four lines of the file.</p><p>We put all of that together in the following command:</p><pre>sed -n '1,4 s/ */ /gp' coleridge.txt</pre><p>This works nicely! The search pattern is what's important here. The asterisk (<code>*</code>) represents zero or more of the preceding character, which is a space. Thus, the search pattern is looking for strings of one space or more.</p><p>If we substitute a single space for any sequence of multiple spaces, we'll return the file to regular spacing, with a single space between each word. This will also substitute a single space for a single space in some cases, but this won't affect anything adversely---we'll still get our desired result.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>If we type the following and reduce the search pattern to a single space, you'll see immediately why we have to include two spaces:</p><pre>sed -n '1,4 s/ */ /gp' coleridge.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/17.png><p>Because the asterisk matches zero or more of the preceding character, it sees each character that isn't a space as a "zero space" and applies the substitution to it.</p><p>However, if we include two spaces in the search pattern, <code>sed</code> must find at least one space character before it applies the substitution. This ensures nonspace characters will remain untouched.</p><p>We type the following, using the <code>-e</code> (expression) we used earlier, which allows us to make two or more substitutions simultaneously:</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre>sed -n -e 's/motion/flutter/gip' -e 's/ocean/gutter/gip' coleridge.txt</pre><p>We can achieve the same result if we use a semicolon (<code>;</code>) to separate the two expressions, like so:</p><pre>sed -n 's/motion/flutter/gip;s/ocean/gutter/gip' coleridge.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/18.png><p>When we swapped "day" for "week" in the following command, the instance of "day" in the expression "well a-day" was swapped as well:</p><pre>sed -n 's/[Dd]ay/week/gp' coleridge.txt</pre><p>To prevent this, we can only attempt substitutions on lines that match another pattern. If we modify the command to have a search pattern at the start, we'll only consider operating on lines that match that pattern.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>We type the following to make our matching pattern the word "after":</p><pre>sed -n '/after/ s/[Dd]ay/week/gp' coleridge.txt</pre><p>That gives us the response we want.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/20.png><h2 id=more-complex-substitutions>More Complex Substitutions</h2><p>Let's give Coleridge a break and use <code>sed</code> to extract names from the <code>etc/passwd</code> file.</p><p>There are shorter ways to do this (more on that later), but we'll use the longer way here to demonstrate another concept. Each matched item in a search pattern (called subexpressions) can be numbered (up to a maximum of nine items). You can then use these numbers in your <code>sed</code> commands to reference specific subexpressions.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>You have to enclose the subexpression in parentheses [<code>()</code>] for this to work. The parentheses also must be preceded by a backward slash (<code>\</code>) to prevent them from being treated as a normal character.</p><p>To do this, you would type the following:</p><pre>sed 's/\([^:]*\).*/\1/' /etc/passwd</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/12-1.png><p>Let's break this down:</p><ul><li><strong><code>sed 's/</code>:</strong> The <code>sed</code> command and the beginning of the substitution expression.</li><li><strong><code>\(</code>:</strong> The opening parenthesis [<code>(</code>] enclosing the subexpression, preceded by a backslash (<code>\</code>).</li><li><strong><code>[^:]*</code>:</strong> The first subexpression of the search term contains a group in square brackets. The caret (<code>^</code>) means "not" when used in a group. A group means any character that isn't a colon (<code>:</code>) will be accepted as a match.</li><li><strong><code>\)</code>:</strong> The closing parenthesis [<code>)</code>] with a preceding backslash (<code>\</code>).</li><li><strong><code>.*</code>:</strong> This second search subexpression means "any character and any number of them."</li><li><strong><code>/\1</code>:</strong> The substitution portion of the expression contains <code>1</code> preceded by a backslash (<code>\</code>). This represents the text that matches the first subexpression.</li><li><strong><code>/'</code>:</strong> The closing forward-slash (<code>/</code>) and single quote (<code>'</code>) terminate the <code>sed</code> command.</li></ul><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>What this all means is we're going to look for any string of characters that doesn't contain a colon (<code>:</code>), which will be the first instance of matching text. Then, we're searching for anything else on that line, which will be the second instance of matching text. We're going to substitute the entire line with the text that matched the first subexpression.</p><p>Each line in the <code>/etc/passwd</code> file starts with a colon-terminated username. We match everything up to the first colon, and then substitute that value for the entire line. So, we've isolated the usernames.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/13-1.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Next, we'll enclose the second subexpression in parentheses [<code>()</code>] so we can reference it by number, as well. We'll also replace <code>\1</code> with <code>\2</code>. Our command will now substitute the entire line with everything from the first colon (<code>:</code>) to the end of the line.</p><p>We type the following:</p><pre>sed 's/\([^:]*\)\(.*\)/\2/' /etc/passwd</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/14-1.png><p>Those small changes invert the meaning of the command, and we get everything except the usernames.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/15.png><p>Now, let's take a look at the quick and easy way to do this.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Our search term is from the first colon (<code>:</code>) to the end of the line. Because our substitution expression is empty (<code>//</code>), we won't replace the matched text with anything.</p><p>So, we type the following, chopping off everything from the first colon (<code>:</code>) to the end of the line, leaving just the usernames:</p><pre>sed 's/:.*//" /etc/passwd</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/10-1.png><p>Let's look at an example in which we reference the first and second matches in the same command.</p><p>We've got a file of commas (<code>,</code>) separating first and last names. We want to list them as "last name, first name." We can use <code>cat</code>, as shown below, to see what's in the file:</p><pre>cat geeks.txt</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Like a lot of <code>sed</code> commands, this next one might look impenetrable at first:</p><pre>sed 's/^\(.*\),\(.*\)$/\2,\1 /g' geeks.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/19.png><p>This is a substitution command like the others we've used, and the search pattern is quite easy. We'll break it down below:</p><ul><li><strong><code>sed 's/</code>:</strong> The normal substitution command.</li><li><strong><code>^</code>:</strong> Because the caret isn't in a group (<code>[]</code>), it means "The start of the line."</li><li><strong><code>\(.*\),</code>:</strong> The first subexpression is any number of any characters. It's enclosed in parentheses [<code>()</code>], each of which is preceded by a backslash (<code>\</code>) so we can reference it by number. Our entire search pattern so far translates as search from the start of the line up to the first comma (<code>,</code>) for any number of any characters.</li><li><strong><code>\(.*\)</code>:</strong> The next subexpression is (again) any number of any character. It's also enclosed in parentheses [<code>()</code>], both of which are preceded by a backslash (<code>\</code>) so we can reference the matching text by number.</li><li><strong><code>$/</code>:</strong> The dollar sign (<code>$</code>) represents the end of the line and will allow our search to continue to the end of the line. We've used this simply to introduce the dollar sign. We don't really need it here, as the asterisk (<code>*</code>) would go to the end of the line in this scenario. The forward slash (<code>/</code>) completes the search pattern section.</li><li><strong><code>\2,\1 /g'</code>:</strong> Because we enclosed our two subexpressions in parentheses, we can refer to both of them by their numbers. Because we want to reverse the order, we type them as <code>second-match,first-match</code>. The numbers have to be preceded by a backslash (<code>\</code>).</li><li><strong><code>/g</code>:</strong> This enables our command to work globally on each line.</li><li><strong><code>geeks.txt</code>:</strong> The file we're working on.</li></ul><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>You can also use the Cut command (<code>c</code>) to substitute entire lines that match your search pattern. We type the following to search for a line with the word "neck" in it, and replace it with a new string of text:</p><pre>sed '/neck/c Around my wrist was strung' coleridge.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/35.png><p>Our new line now appears at the bottom of our extract.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/36.png><h2 id=inserting-lines-and-text>Inserting Lines and Text</h2><p>We can also insert new lines and text into our file. To insert new lines after any matching ones, we'll use the Append command (<code>a</code>).</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Here's the file we're going to work with:</p><p>cat geeks.txt</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/22.png><p>We've numbered the lines to make this a bit easier to follow.</p><p>We type the following to search for lines that contain the word "He," and insert a new line beneath them:</p><pre>sed '/He/a --&gt; Inserted!' geeks.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/23.png><p>We type the following and include the Insert Command (<code>i</code>) to insert the new line above those that contain matching text:</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre>sed '/He/i --&gt; Inserted!' geeks.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/24.png><p>We can use the ampersand (<code>&</code>), which represents the original matched text, to add new text to a matching line. <code>\1</code> , <code>\2</code>, and so on, represent matching subexpressions.</p><p>To add text to the start of a line, we'll use a substitution command that matches everything on the line, combined with a replacement clause that combines our new text with the original line.</p><p>To do all of this, we type the following:</p><pre>sed 's/.*/--&gt; Inserted &amp;/' geeks.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/25.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>We type the following, including the <code>G</code> command, which will add a blank line between each line:</p><pre>sed 'G' geeks.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/26.png><p>If you want to add two or more blank lines, you can use <code>G;G</code>, <code>G;G;G</code>, and so on.</p><h2 id=deleting-lines>Deleting Lines</h2><p>The Delete command (<code>d</code>) deletes lines that match a search pattern, or those specified with line numbers or ranges.</p><p>For example, to delete the third line, we would type the following:</p><pre>sed '3d' geeks.txt</pre><p>To delete the range of lines four to five, we'd type the following:</p><pre>sed '4,5d' geeks.txt</pre><p>To delete lines outside a range, we use an exclamation point (<code>!</code>), as shown below:</p><pre>sed '6,7!d' geeks.txt</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/27.png><h2 id=saving-your-changes>Saving Your Changes</h2><p>So far, all of our results have printed to the terminal window, but we haven't yet saved them anywhere. To make these permanent, you can either write your changes to the original file or redirect them to a new one.</p><p>Overwriting your original file requires some caution. If your <code>sed</code> command is wrong, you might make some changes to the original file that are difficult to undo.</p><p>For some peace of mind, <code>sed</code> can create a backup of the original file before it executes its command.</p><p>You can use the In-place option (<code>-i</code>) to tell <code>sed</code> to write the changes to the original file, but if you add a file extension to it, <code>sed</code> will back up the original file to a new one. It will have the same name as the original file, but with a new file extension.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>To demonstrate, we'll search for any lines that contain the word "He" and delete them. We'll also back up our original file to a new one using the BAK extension.</p><p>To do all of this, we type the following:</p><pre>sed -i'.bak' '/^.*He.*$/d' geeks.txt</pre><p>We type the following to make sure our backup file is unchanged:</p><pre>cat geeks.txt.bak</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/28.png><p>We can also type the following to redirect the output to a new file and achieve a similar result:</p><pre>sed -i'.bak' '/^.*He.*$/d' geeks.txt &gt; new_geeks.txt</pre><p>We use <code>cat</code> to confirm the changes were written to the new file, as shown below:</p><pre>cat new_geeks.txt</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2020/04/29.png><h2 id=having-sed-all-that>Having sed All That</h2><p>As you've probably noticed, even this quick primer on <code>sed</code> is quite long. There's a lot to this command, and there's even <a href=#>more you can do with it</a>.</p><p>Hopefully, though, these basic concepts have provided a solid foundation on which you can build as you continue to learn more.</p><table border=1 cellpadding=1 cellspacing=1 align summary><tbody><tr><td></td><td style=text-align:center><p>Linux Commands</p></td></tr><tr><td><p>Files</p></td><td><p><a href=#>tar</a><strong>·</strong><a href=#>pv</a><strong>·</strong><a href=#>cat</a><strong>·</strong><a href=#>tac</a><strong>·</strong><a href=#>chmod</a><strong>·</strong><a href=#>grep</a><strong> ·</strong><a href=#>diff</a><strong>·</strong><a href=#>sed</a><strong>·</strong><a href=#>ar</a><strong>·</strong><a href=#>man</a><strong>·</strong><a href=#>pushd</a><strong>·</strong><a href=#>popd</a><strong>·</strong><a href=#>fsck</a><strong>·</strong><a href=#>testdisk</a><strong>·</strong><a href=#>seq</a><strong>·</strong><a href=#>fd</a><strong>·</strong><a href=#>pandoc</a><strong>·</strong><a href=#>cd</a><strong>·</strong><a href=#>$PATH</a><strong>·</strong><a href=#>awk</a><strong>·</strong><a href=#>join</a><strong>·</strong><a href=#>jq</a><strong>·</strong><a href=#>fold</a><strong>·</strong><a href=#>uniq</a><strong>·</strong><a href=#>journalctl</a><strong>·</strong><a href=#>tail</a><strong>·</strong><a href=#>stat</a><strong>·</strong><a href=#>ls</a><strong>·</strong><a href=#>fstab</a><strong>·</strong><a href=#>echo</a><strong>·</strong><a href=#>less</a><strong>·</strong><a href=#>chgrp</a><strong>·</strong><a href=#>chown</a><strong>·</strong><a href=#>rev</a><strong>·</strong><a href=#>look</a><strong>·</strong><a href=#>strings</a><strong>·</strong><a href=#>type</a><strong>·</strong><a href=#>rename</a><strong>·</strong><a href=#>zip</a><strong>·</strong><a href=#>unzip</a><strong>·</strong><a href=#>mount</a><strong>·</strong><a href=#>umount</a><strong>·</strong><a href=#>install</a><strong>·</strong><a href=#>fdisk</a><strong>·</strong><a href=#>mkfs</a><strong>·</strong><a href=#>rm</a><strong>·</strong><a href=#>rmdir</a><strong>·</strong><a href=#>rsync</a><strong>·</strong><a href=#>df</a><strong>·</strong><a href=#>gpg</a><strong>·</strong><a href=#>vi</a><strong>·</strong><a href=#>nano</a><strong>·</strong><a href=#>mkdir</a><strong>·</strong><a href=#>du</a><strong>·</strong><a href=#>ln</a><strong>·</strong><a href=#>patch</a><strong>·</strong><a href=#>convert</a><strong>·</strong><a href=#>rclone</a><strong>·</strong><a href=#>shred</a><strong>·</strong><a href=#>srm</a><strong>·</strong><a href=#>scp</a><strong>·</strong><a href=#>gzip</a><strong>·</strong><a href=#>chattr</a><strong>·</strong><a href=#>cut</a><strong>·</strong><a href=#>find</a><strong>·</strong><a href=#>umask</a><strong>·</strong><a href=#>wc</a><strong>· </strong><a href=#>tr</a></p></td><td></td></tr><tr><td><p>Processes</p></td><td><p><a href=#>alias</a><strong>·</strong><a href=#>screen</a><strong>·</strong><a href=#>top</a><strong>·</strong><a href=#>nice</a><strong>·</strong><a href=#>renice</a><strong>·</strong><a href=#>progress</a><strong>·</strong><a href=#>strace</a><strong>·</strong><a href=#>systemd</a><strong>·</strong><a href=#>tmux</a><strong>·</strong><a href=#>chsh</a><strong>·</strong><a href=#>history</a><strong>·</strong><a href=#>at</a><strong>·</strong><a href=#>batch</a><strong>·</strong><a href=#>free</a><strong>·</strong><a href=#>which</a><strong>·</strong><a href=#>dmesg</a><strong>·</strong><a href=#>chfn</a><strong>·</strong><a href=#>usermod</a><strong>·</strong><a href=#>ps</a><strong>·</strong><a href=#>chroot</a><strong>·</strong><a href=#>xargs</a><strong>·</strong><a href=#>tty</a><strong>·</strong><a href=#>pinky</a><strong>·</strong><a href=#>lsof</a><strong>·</strong><a href=#>vmstat</a><strong>·</strong><a href=#>timeout</a><strong>·</strong><a href=#>wall</a><strong>·</strong><a href=#>yes</a><strong>·</strong><a href=#>kill</a><strong>·</strong><a href=#>sleep</a><strong>·</strong><a href=#>sudo</a><strong>·</strong><a href=#>su</a><strong>·</strong><a href=#>time</a><strong>·</strong><a href=#>groupadd</a><strong>·</strong><a href=#>usermod</a><strong>·</strong><a href=#>groups</a><strong>·</strong><a href=#>lshw</a><strong>·</strong><a href=#>shutdown</a><strong>·</strong><a href=#>reboot</a><strong>·</strong><a href=#>halt</a><strong>·</strong><a href=#>poweroff</a><strong>·</strong><a href=#>passwd</a><strong>·</strong><a href=#>lscpu</a><strong>·</strong><a href=#>crontab</a><strong>·</strong><a href=#>date</a><strong>·</strong><a href=#>bg</a><strong>·</strong><a href=#>fg</a><strong>·</strong><a href=#>pidof</a><strong>·</strong><a href=#>nohup</a><strong>·</strong><a href=#>pmap</a></p></td><td></td></tr><tr><td><p>Networking</p></td><td><p><a href=#>netstat</a><strong>·</strong><a href=#>ping</a><strong>·</strong><a href=#>traceroute</a><strong>·</strong><a href=#>ip</a><strong>·</strong><a href=#>ss</a><strong>·</strong><a href=#>whois</a><strong>·</strong><a href=#>fail2ban</a><strong>·</strong><a href=#>bmon</a><strong>·</strong><a href=#>dig</a><strong>·</strong><a href=#>finger</a><strong>·</strong><a href=#>nmap</a><strong>·</strong><a href=#>ftp</a><strong>·</strong><a href=#>curl</a><strong>·</strong><a href=#>wget</a><strong>·</strong><a href=#>who</a><strong>·</strong><a href=#>whoami</a><strong>·</strong><a href=#>w</a><strong>·</strong><a href=#>iptables</a><strong>·</strong><a href=#>ssh-keygen</a><strong>·</strong><a href=#>ufw</a><strong>·</strong><a href=#>arping</a><strong>·</strong><a href=#>firewalld</a></p></td><td></td></tr></tbody></table><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7qbvWraagnZWge6S7zGhtb25jboJwtM6wZK2nXarApnnToZxmq5WZeqS7zKaYp5xdpLtuuMinrLFn</p></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=./influencer-battered-elle-brooke-poses-29606646.html rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Influencer battered by Elle Brooke poses on bed in underwear to talk about 'balls'</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=./selena-gomez-barbie-themed-birthday-party-ken-kenergy.html rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Selena Gomez's Barbie birthday was actually full of &amp;quot;Kenergy&amp;quot; - here's why</p></a></div></nav></div><aside class=sidebar><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=./marco-pasternak-better-call-saul-character-profile.html>Marco Pasternak: Better Call Saul character profile</a></li><li class=widget__item><a class=widget__link href=./truck-vs-person-crash-off-n-division-st-in-davenport.html>Police investigate fatal crash off North Division Street, Davenport</a></li><li class=widget__item><a class=widget__link href=./grant-chestnu.html>Who is American Actor Grant Chestnut? His Height, Weight, Bio</a></li><li class=widget__item><a class=widget__link href=./john-cangelosi.html>Who is John Cangelosi dating? John Cangelosi girlfriend, wife</a></li><li class=widget__item><a class=widget__link href=./sandy-cagle.html>Who is Sandy Cagle dating? Sandy Cagle boyfriend, husband</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=./categories/blog/>blog</a></li></ul></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 DashJ.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=https://assets.cdnweb.info/hugo/mainroad/js/menu.js></script>
<script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>